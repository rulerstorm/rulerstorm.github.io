<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> App服务端搭建 · Rock's personal notebook</title><meta name="description" content="App服务端搭建 - Rock Lu"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/u/1565858217" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/rulerstorm" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="/impress/index.html" target="_self" class="nav-list-link">TEST</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">App服务端搭建</h1><div class="post-time">Oct 22, 2015</div><div class="post-content"><p>搭建一个简单的app后端其实并没有太大的技术含量，但是这个过程中还是遇到一些坑的。</p>
<a id="more"></a>
<h4 id="服务器的连接"><a href="#服务器的连接" class="headerlink" title="服务器的连接"></a>服务器的连接</h4><p>对于云端的服务器来说，首先遇到的问题是：代码虽然可以远程用vim写，长期看来总需要传文件，怎么方便？<br>答：<code>scp</code>命令。[注]批量传输可用通配符，但是需要加转义斜杠.</p>
<p>例子：<br><code>scp root@120.27.54.111:/var/www/\*.php ~/Desktop</code><br><code>scp statistic.php root@120.27.54.111:/var/www/</code></p>
<p>另外，对于在线编辑代码的延迟，有什么解决方案嘛？<br>答：<code>mosh</code>开源shell，可以在本地进行预判响应。</p>
<h4 id="服务编写"><a href="#服务编写" class="headerlink" title="服务编写"></a>服务编写</h4><p>补充两个原来不清楚的知识：<br>1.对于app服务器，80端口需要让出来给网页，apache服务器怎么更换监听端口？<br>答：配置文件夹里找到<code>「ports.conf」</code>，里面有一句<code>listen 80</code>，我相信你懂了。然后记得重启apache。</p>
<p>2.想要定期运行脚本清理数据库怎么实现？<br>答：<code>crontab</code>命令。<code>-e</code>编辑，<code>-l</code>就是list，<code>-r</code>删除。</p>
<p>3.PHP的本地调试<br>好吧，我是最近才知道php可以本地执行的，<code>php PHP_filePath</code>就能运行了，直接echo在命令行里。</p>
<p>4.关于状态码「<code>重要</code>」<br>可能是由于约定俗称的原因，服务端返回的状态码基本与HTTP协议一致，AFNetwording网络库就规定只有200-299的状态码才算“成功”。<br>对于HTTP状态码，引用一个最近看到的cheatsheet，非常形象：<br>1xx, hold on （等一下，正在处理）<br>2xx, here you go!  （ok，正确）<br>3xx, go away  （跳转至其他页面）<br>4xx, you fucked up  （请求错误，如404页面不存在）<br>5xx, I fucked up  （服务器错误，如502 bad gateway）</p>
<h4 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h4><p>1.本地缓存，就是写磁盘文件。<br>2.radis内存缓存。</p>
<h4 id="其他注意事项"><a href="#其他注意事项" class="headerlink" title="其他注意事项"></a>其他注意事项</h4><p>为了防止app端挂掉，尽量在服务端出错时也给予响应。</p>
<p>进一步参考：<br><a href="http://www.cnblogs.com/shangdahao/archive/2013/06/01/3111755.html" target="_blank" rel="external">http://www.cnblogs.com/shangdahao/archive/2013/06/01/3111755.html</a></p>
</div></article></div></section><footer><div class="paginator"><a href="/2015/11/10/iOS毛玻璃效果/" class="prev">PRVE</a><a href="/2015/10/14/iOS9更新后的坑/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://Rocklu.me">Rock Lu</a>, unless otherwise noted.</p></div></footer><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>